<!DOCTYPE html>
<html lang="zh">
<div th:replace="/note/fragment/header :: header"></div>

<body class="leanote-plugin lang-zh_CN"
	th:class="'leanote-plugin lang-'+${locale}">
	<div id="page">
		<div id="pageInner">
			<!-- 主内容 editor -->
			<div th:replace="/note/fragment/note_header :: header"></div>
			
			<div id="mainContainer" class="clearfix">
				<div id="mainMask">
					<img src="/images/loading-30.gif" /> <br /> <br /> loading...
				</div>
				<!-- 左侧导航栏 -->
				<div th:replace="/note/fragment/notebook_left :: leftNotebook"></div>

			</div>
			<div class="noteSplit" id="notebookSplitter"></div>

			<div id="noteAndEditor">
				<div id="noteAndEditorMask">
					<img src="/images/loading-24.gif" /> <br /> loading...
				</div>
				<div th:replace="/note/fragment/notebook_nodelist :: noteList"></div>
				<div class="noteSplit" id="noteSplitter"></div>
				<div th:replace="/note/fragment/notebook_note :: note"></div>
				<div th:include="/note/fragment/notebook_mdeditor :: mdEditor"></div>
				</div>
			</div>

			<!-- mdEditor -->
			
			
			<!-- 插入图片 -->
			<div class="modal fade modal-insert-image">
				<div class="modal-dialog" style="width: 840px; max-width: 100%;">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">&times;</button>
							<h4 class="modal-title" th:text="#{Image}"></h4>
						</div>
						<div class="modal-body" style="padding-top: 0; padding-bottom: 0">
							<iframe name="mdImageManager" style="width: 100%; height: 350px"
								scrolling="no" id="leauiIfrForMD" src="" frameborder="0"></iframe>
						</div>
						<div class="modal-footer">
							<a href="#" class="btn btn-default" data-dismiss="modal" th:text="#{Cancel}">Cancel</a> 
							<a href="#" class="btn btn-primary action-insert-image" data-dismiss="modal" th:text="#{Insert Image}"></a>
						</div>
					</div>
				</div>
			</div>
			<!-- v1 -->
			<!-- Hidden Popup Modal -->
			<div class="modal fade bs-modal-sm" id="editorDialog" tabindex="-1"
				role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">

						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="editorDialog-title"></h4>
						</div>
						<div class="modal-body">
							<p></p>
							<div class="input-group">
								<span class="input-group-addon"> <i></i>
								</span> <input type="text" class="form-control" placeholder="" />
							</div>
						</div>

						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal" th:text="#{cancel}">cancel</button>
							<button type="button" class="btn btn-primary"
								id="editorDialog-confirm" th:text="#{confirm}">confirm</button>
						</div>

					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- /.modal -->
			<!-- 弹出框 模板 -->
			<div class="modal fade bs-modal-sm" id="leanoteDialogRemote"
				tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
				aria-hidden="true"></div>

			<div class="modal fade bs-modal-sm" id="leanoteDialog" tabindex="-1"
				role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">

						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="modalTitle">操作</h4>
						</div>

						<div class="modal-body">内容区</div>

						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
							<button type="button" class="btn btn-primary">Save
								changes</button>
						</div>

					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- /.modal -->

			<div th:repalce="/note/fragment/note_sendRegisterEmailDialog :: sendRegisterEmailDialog"></div>
			<div th:repalce="/note/fragment/note_theme :: theme"></div>

			<!-- 编辑器提示 -->


			<!-- modal 静态区域 -->
			<div class="display: hidden">
				<div class="hide" id="copyDiv"></div>
			</div>
		</div>

		<script th:inline="javascript">
/*<![CDATA[*/
var LEA = {sPath: ''};
LEA.locale = "[[${locale}]]";
var UrlPrefix = [[${siteUrl}]];
var UserInfo = [[${userInfo}]];
var notebooks = [[${notebooks}]];
var shareNotebooks = [[${shareNotebooks}]];
var sharedUserInfos = [[${sharedUserInfos}]];
var curNoteId = '[[${curNoteId}]]';
var curNotebookId = '[[${curNotebookId}]]';
var curSharedNoteNotebookId = '[[${curSharedNoteNotebookId}]]';
var curSharedUserId = '[[${curSharedNoteNotebookId}]]';
var notes = [[${notes}]];
var latestNotes = [[${latestNotes==null?null:latestNotes}]];
var noteContentJson = [[${noteContentJson}]];
var tagsJson = [[${tags}]];
var GlobalConfigs = [[${globalConfigs}]];
var tinyMCEPreInit = {base: '/tinymce', suffix: '.min'};
/*]]>*/
</script>


<script src="/js/i18n/msg.en_US.js"  th:src="'/js/i18n/msg.'+${locale}+'.js'"></script>

<!-- <script src="/js/dep.min.js"></script> -->
<script src="/js/jquery-1.9.0.min.js"></script>
<script src="/js/jquery.ztree.all-3.5.js"></script>
<script src="/js/object_id.js"></script>


<!-- <script src="/tinymce/tinymce.full.min.js"></script> -->
<script src="/tinymce/tinymce.js"></script>
<script src="/libs/ace/ace.js"></script>

<!-- <script src="/js/app.min.js"></script> -->
<!-- dev -->
<script src="/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.js"></script>
<script src="/js/contextmenu/jquery.contextmenu.js"></script>
<script src="/js/common.js"></script>
<script src="/js/bootstrap-min.js"></script>
<script src="/js/app/note.js"></script>
<script src="/js/app/tag.js"></script>
<script src="/js/app/notebook.js"></script>
<script src="/js/app/share.js"></script>
<script src="/js/app/page.js?t=1"></script>
<!-- /dev -->



<script th:inline="javascript">
/*<![CDATA[*/

//initPage();
// 当tinymce.dev.js时, 请注释require
window.require = {
    baseUrl: '/public',
};
/*]]>*/
</script>
<!-- <script src="/js/markdown-v2.min.js"></script> -->
<!-- dev -->
<script src="/js/require.js"></script>
<script src="/md/main-v2.min.js"></script>
<!-- /dev -->


<!-- <script src="/js/plugins/main.min.js"></script> -->
<script src="/js/plugins/main.js"></script>
</body>
</html>
